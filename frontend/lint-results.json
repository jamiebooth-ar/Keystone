[{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\eslint.config.js","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\App.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\api.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\components\\AdOpsModal.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListItemText' is defined but never used.","line":13,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":13,"endColumn":17},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'index' is defined but never used.","line":74,"column":62,"nodeType":null,"messageId":"unusedVar","endLine":74,"endColumn":67}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React from 'react';\r\nimport {\r\n    Dialog,\r\n    DialogTitle,\r\n    DialogContent,\r\n    DialogActions,\r\n    Button,\r\n    Box,\r\n    Typography,\r\n    Chip,\r\n    List,\r\n    ListItem,\r\n    ListItemText,\r\n    Divider,\r\n    Alert\r\n} from '@mui/material';\r\nimport WarningIcon from '@mui/icons-material/Warning';\r\nimport CloseIcon from '@mui/icons-material/Close';\r\nimport IconButton from '@mui/material/IconButton';\r\n\r\ninterface FlaggedCampaign {\r\n    id: string;\r\n    name: string;\r\n    issues: string[];\r\n    spend: number;\r\n    impressions: number;\r\n    cpm: number;\r\n}\r\n\r\ninterface AdOpsModalProps {\r\n    open: boolean;\r\n    onClose: () => void;\r\n    flaggedCampaigns: FlaggedCampaign[];\r\n}\r\n\r\nconst AdOpsModal: React.FC<AdOpsModalProps> = ({ open, onClose, flaggedCampaigns }) => {\r\n    return (\r\n        <Dialog\r\n            open={open}\r\n            onClose={onClose}\r\n            maxWidth=\"md\"\r\n            fullWidth\r\n            PaperProps={{\r\n                sx: {\r\n                    borderRadius: 2,\r\n                    minHeight: '400px'\r\n                }\r\n            }}\r\n        >\r\n            <DialogTitle sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', pb: 1 }}>\r\n                <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                    <WarningIcon color=\"warning\" />\r\n                    <Typography variant=\"h6\">Ad Ops Operative Analysis</Typography>\r\n                </Box>\r\n                <IconButton onClick={onClose} size=\"small\">\r\n                    <CloseIcon />\r\n                </IconButton>\r\n            </DialogTitle>\r\n\r\n            <Divider />\r\n\r\n            <DialogContent sx={{ pt: 2 }}>\r\n                {flaggedCampaigns.length === 0 ? (\r\n                    <Alert severity=\"success\" sx={{ borderRadius: 2 }}>\r\n                        All campaigns are performing within industry standards. No issues detected.\r\n                    </Alert>\r\n                ) : (\r\n                    <>\r\n                        <Alert severity=\"warning\" sx={{ mb: 3, borderRadius: 2 }}>\r\n                            Found {flaggedCampaigns.length} campaign{flaggedCampaigns.length !== 1 ? 's' : ''} with performance issues\r\n                        </Alert>\r\n\r\n                        <List sx={{ width: '100%' }}>\r\n                            {flaggedCampaigns.map((campaign, index) => (\r\n                                <React.Fragment key={campaign.id}>\r\n                                    <ListItem\r\n                                        sx={{\r\n                                            flexDirection: 'column',\r\n                                            alignItems: 'flex-start',\r\n                                            bgcolor: '#fafafa',\r\n                                            borderRadius: 1,\r\n                                            mb: 2,\r\n                                            p: 2\r\n                                        }}\r\n                                    >\r\n                                        <Box sx={{ width: '100%', mb: 1 }}>\r\n                                            <Typography variant=\"subtitle1\" fontWeight={600} gutterBottom>\r\n                                                {campaign.name}\r\n                                            </Typography>\r\n                                            <Box sx={{ display: 'flex', gap: 1, flexWrap: 'wrap', mb: 1 }}>\r\n                                                {campaign.issues.map((issue, idx) => (\r\n                                                    <Chip\r\n                                                        key={idx}\r\n                                                        label={issue}\r\n                                                        size=\"small\"\r\n                                                        color=\"warning\"\r\n                                                        variant=\"outlined\"\r\n                                                    />\r\n                                                ))}\r\n                                            </Box>\r\n                                        </Box>\r\n                                        <Box sx={{ display: 'flex', gap: 3, width: '100%', flexWrap: 'wrap' }}>\r\n                                            <Box>\r\n                                                <Typography variant=\"caption\" color=\"text.secondary\">Spend</Typography>\r\n                                                <Typography variant=\"body2\" fontWeight={500}>┬ú{campaign.spend.toFixed(2)}</Typography>\r\n                                            </Box>\r\n                                            <Box>\r\n                                                <Typography variant=\"caption\" color=\"text.secondary\">Impressions</Typography>\r\n                                                <Typography variant=\"body2\" fontWeight={500}>{campaign.impressions.toLocaleString()}</Typography>\r\n                                            </Box>\r\n                                            <Box>\r\n                                                <Typography variant=\"caption\" color=\"text.secondary\">CPM</Typography>\r\n                                                <Typography variant=\"body2\" fontWeight={500}>┬ú{campaign.cpm.toFixed(2)}</Typography>\r\n                                            </Box>\r\n                                        </Box>\r\n                                    </ListItem>\r\n                                </React.Fragment>\r\n                            ))}\r\n                        </List>\r\n                    </>\r\n                )}\r\n            </DialogContent>\r\n\r\n            <Divider />\r\n\r\n            <DialogActions sx={{ p: 2 }}>\r\n                <Button onClick={onClose} variant=\"outlined\">\r\n                    Close\r\n                </Button>\r\n            </DialogActions>\r\n        </Dialog>\r\n    );\r\n};\r\n\r\nexport default AdOpsModal;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\components\\CurrentCampaigns.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":28,"column":42,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":28,"endColumn":45,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1258,1261],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1258,1261],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":74,"column":52,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":74,"endColumn":55,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[2839,2842],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[2839,2842],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Paper, Table, TableBody, TableCell, TableContainer, TableHead, TableRow,\r\n    Typography, Box, Chip, CircularProgress, Alert, Card, CardContent,\r\n    ToggleButtonGroup, ToggleButton\r\n} from '@mui/material';\r\nimport WarningIcon from '@mui/icons-material/Warning';\r\nimport api from '../api';\r\nimport type { CampaignList } from '../types';\r\n\r\nconst CurrentCampaigns: React.FC = () => {\r\n    const [data, setData] = useState<CampaignList | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n    const [filter, setFilter] = useState<'all' | 'Brand' | 'LeadGen' | 'Event'>('all');\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                setLoading(true);\r\n                setError(null);\r\n                console.log('Fetching campaigns from API...');\r\n                const response = await api.get<CampaignList>('/campaigns');\r\n                console.log('Campaigns response:', response.data);\r\n                setData(response.data);\r\n            } catch (err) {\r\n                console.error('Error fetching campaigns:', err);\r\n                const errorMsg = (err as any).response?.data?.detail || 'Failed to fetch campaigns. Please check your Meta API connection.';\r\n                setError(errorMsg);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n        fetchData();\r\n    }, []);\r\n\r\n    if (loading) return (\r\n        <Box sx={{ display: 'flex', flexDirection: 'column', alignItems: 'center', justifyContent: 'center', py: 8 }}>\r\n            <CircularProgress size={48} />\r\n            <Typography variant=\"body2\" color=\"text.secondary\" sx={{ mt: 2 }}>\r\n                Loading campaigns from Meta...\r\n            </Typography>\r\n        </Box>\r\n    );\r\n\r\n    if (error) return (\r\n        <Alert severity=\"error\" sx={{ borderRadius: 2 }}>\r\n            {error}\r\n        </Alert>\r\n    );\r\n\r\n    if (!data) return null;\r\n\r\n    const allCampaigns = [...data.Brand, ...data.LeadGen];\r\n\r\n    // Filter campaigns based on selection using campaign_type field\r\n    const filteredCampaigns = filter === 'all'\r\n        ? allCampaigns\r\n        : allCampaigns.filter(c => {\r\n            if (filter === 'Event') {\r\n                // Use campaign_type field if available\r\n                return c.campaign_type === 'Event';\r\n            }\r\n            if (filter === 'Brand') {\r\n                return c.campaign_type === 'Brand';\r\n            }\r\n            if (filter === 'LeadGen') {\r\n                return c.campaign_type === 'LeadGen';\r\n            }\r\n            return true;\r\n        });\r\n\r\n    // Evaluate campaign performance based on industry standards\r\n    const evaluateCampaignPerformance = (campaign: any) => {\r\n        const cpm = campaign.total_impressions > 0\r\n            ? (campaign.total_spend / campaign.total_impressions) * 1000\r\n            : 0;\r\n\r\n        const issues: string[] = [];\r\n\r\n        // High CPM threshold: > ┬ú12 (education avg: ┬ú8.19)\r\n        if (cpm > 12) {\r\n            issues.push('High CPM');\r\n        }\r\n\r\n        // Low impressions with significant spend: < 1,000 impressions with spend > ┬ú100\r\n        if (campaign.total_impressions < 1000 && campaign.total_spend > 100) {\r\n            issues.push('Low impressions');\r\n        }\r\n\r\n        // Spending without results: > ┬ú500 spend with 0 impressions\r\n        if (campaign.total_spend > 500 && campaign.total_impressions === 0) {\r\n            issues.push('No impressions');\r\n        }\r\n\r\n        return {\r\n            isPoorPerformer: issues.length > 0,\r\n            issues\r\n        };\r\n    };\r\n\r\n    const activeCampaigns = filteredCampaigns.filter(c => c.effective_status === 'ACTIVE');\r\n    const totalSpend = filteredCampaigns.reduce((acc, c) => acc + c.total_spend, 0);\r\n\r\n\r\n    return (\r\n        <Box>\r\n            <Box sx={{ mb: 3, display: 'flex', gap: 2, alignItems: 'center', justifyContent: 'space-between' }}>\r\n                <Box sx={{ display: 'flex', gap: 2, flex: 1 }}>\r\n                    <Card sx={{ flex: 1 }}>\r\n                        <CardContent>\r\n                            <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                Active Campaigns\r\n                            </Typography>\r\n                            <Typography variant=\"h4\" color=\"primary\">\r\n                                {activeCampaigns.length}\r\n                            </Typography>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card sx={{ flex: 1 }}>\r\n                        <CardContent>\r\n                            <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                Total Spend\r\n                            </Typography>\r\n                            <Typography variant=\"h4\" fontWeight={700} sx={{ color: '#1AC284' }}>\r\n                                ┬ú{totalSpend.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}\r\n                            </Typography>\r\n                        </CardContent>\r\n                    </Card>\r\n                    <Card sx={{ flex: 1 }}>\r\n                        <CardContent>\r\n                            <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                Total Impressions\r\n                            </Typography>\r\n                        </CardContent>\r\n                    </Card>\r\n                </Box>\r\n\r\n                <ToggleButtonGroup\r\n                    value={filter}\r\n                    exclusive\r\n                    onChange={(_, newFilter) => newFilter && setFilter(newFilter)}\r\n                    size=\"small\"\r\n                    sx={{ gap: 1 }}\r\n                >\r\n                    <ToggleButton value=\"all\">All</ToggleButton>\r\n                    <ToggleButton value=\"Brand\">Brand</ToggleButton>\r\n                    <ToggleButton value=\"LeadGen\">Lead Gen</ToggleButton>\r\n                    <ToggleButton value=\"Event\">Event</ToggleButton>\r\n                </ToggleButtonGroup>\r\n            </Box>\r\n\r\n            <TableContainer component={Paper} elevation={0} sx={{ border: '1px solid', borderColor: 'divider' }}>\r\n                <Table>\r\n                    <TableHead>\r\n                        <TableRow>\r\n                            <TableCell>Campaign Name</TableCell>\r\n                            <TableCell>Platform</TableCell>\r\n                            <TableCell>Type</TableCell>\r\n                            <TableCell>Brand</TableCell>\r\n                            <TableCell align=\"right\">Spend</TableCell>\r\n                            <TableCell align=\"right\">Impressions</TableCell>\r\n                            <TableCell align=\"right\">CPM</TableCell>\r\n                            <TableCell>Date</TableCell>\r\n                        </TableRow>\r\n                    </TableHead>\r\n                    <TableBody>\r\n                        {filteredCampaigns.length === 0 ? (\r\n                            <TableRow>\r\n                                <TableCell colSpan={7} align=\"center\" sx={{ py: 4 }}>\r\n                                    <Typography color=\"text.secondary\">\r\n                                        No campaigns found\r\n                                    </Typography>\r\n                                </TableCell>\r\n                            </TableRow>\r\n                        ) : (\r\n                            filteredCampaigns.map((campaign) => {\r\n                                // Evaluate campaign performance\r\n                                const performance = evaluateCampaignPerformance(campaign);\r\n\r\n                                const cpm = campaign.total_impressions > 0\r\n                                    ? (campaign.total_spend / campaign.total_impressions) * 1000\r\n                                    : 0;\r\n\r\n                                let chipLabel = campaign.campaign_type || \"Brand\";\r\n                                let chipColor: \"primary\" | \"secondary\" | \"success\" = \"primary\";\r\n\r\n                                if (chipLabel === \"Event\") {\r\n                                    chipColor = \"success\";\r\n                                } else if (chipLabel === \"LeadGen\") {\r\n                                    chipLabel = \"Lead Gen\";\r\n                                    chipColor = \"secondary\";\r\n                                }\r\n\r\n\r\n                                // Brand chip colors: FAM = #1AC284, FAP = #0000FF, FAU = #7645FB\r\n                                // Brand chip colors: FAM = #1AC284, FAP = #0000FF, FAU = #7645FB\r\n                                let brandChipColor = \"#7645FB\"; // Default to FAU purple\r\n                                let brandChipLabel = \"FAU\"; // Default to FAU if N/A or missing\r\n\r\n                                if (campaign.brand === \"FAM\") {\r\n                                    brandChipColor = \"#1AC284\"; // FindAMasters green\r\n                                    brandChipLabel = \"FAM\";\r\n                                } else if (campaign.brand === \"FAP\") {\r\n                                    brandChipColor = \"#0000FF\"; // FindAPhD blue\r\n                                    brandChipLabel = \"FAP\";\r\n                                }\r\n                                // If brand is N/A, null, undefined, or FAU, it stays as the default FAU\r\n\r\n\r\n                                return (\r\n                                    <TableRow\r\n                                        key={campaign.id}\r\n                                        hover\r\n                                        sx={{\r\n                                            borderLeft: performance.isPoorPerformer ? '4px solid' : 'none',\r\n                                            borderColor: 'warning.main'\r\n                                        }}\r\n                                    >\r\n                                        <TableCell component=\"th\" scope=\"row\">\r\n                                            <Box sx={{ display: 'flex', alignItems: 'center', gap: 1 }}>\r\n                                                {campaign.name}\r\n                                                {performance.isPoorPerformer && (\r\n                                                    <Chip\r\n                                                        icon={<WarningIcon />}\r\n                                                        label={performance.issues.join(', ')}\r\n                                                        size=\"small\"\r\n                                                        color=\"error\"\r\n                                                        variant=\"outlined\"\r\n                                                        sx={{ fontWeight: 600 }}\r\n                                                    />\r\n                                                )}\r\n                                            </Box>\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Chip\r\n                                                label={campaign.platform || \"Meta\"}\r\n                                                size=\"small\"\r\n                                                sx={{\r\n                                                    bgcolor: (campaign.platform === 'TikTok' ? '#000000' : campaign.platform === 'YouTube' ? '#FF0000' : '#0668E1'),\r\n                                                    color: 'white',\r\n                                                }}\r\n                                            />\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Chip\r\n                                                label={chipLabel}\r\n                                                size=\"small\"\r\n                                                color={chipColor}\r\n                                                variant=\"outlined\"\r\n                                            />\r\n                                        </TableCell>\r\n                                        <TableCell>\r\n                                            <Chip\r\n                                                label={brandChipLabel}\r\n                                                size=\"small\"\r\n                                                sx={{\r\n                                                    bgcolor: brandChipColor,\r\n                                                    color: 'white',\r\n                                                }}\r\n                                            />\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            ┬ú{campaign.total_spend.toLocaleString(undefined, { minimumFractionDigits: 0, maximumFractionDigits: 0 })}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            {campaign.total_impressions.toLocaleString()}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">┬ú{cpm.toFixed(2)}</TableCell>\r\n                                        <TableCell sx={{ whiteSpace: 'nowrap' }}>\r\n                                            {campaign.stop_time || campaign.campaign_date || '-'}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                );\r\n                            })\r\n                        )}\r\n                    </TableBody>\r\n                </Table>\r\n            </TableContainer>\r\n        </Box >\r\n    );\r\n};\r\n\r\nexport default CurrentCampaigns;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\components\\Layout.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'ListSubheader' is defined but never used.","line":15,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":15,"endColumn":18},{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'Typography' is defined but never used.","line":17,"column":5,"nodeType":null,"messageId":"unusedVar","endLine":17,"endColumn":15},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":292,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":292,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[12220,12223],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[12220,12223],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":3,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport {\r\n    Box,\r\n    Drawer,\r\n    AppBar,\r\n    Toolbar,\r\n    List,\r\n    ListItem,\r\n    ListItemButton,\r\n    ListItemIcon,\r\n    ListItemText,\r\n    IconButton,\r\n    Divider,\r\n    Collapse,\r\n    ListSubheader,\r\n    Tooltip,\r\n    Typography,\r\n} from '@mui/material';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport EmojiObjectsIcon from '@mui/icons-material/EmojiObjects';\r\nimport CampaignIcon from '@mui/icons-material/Campaign';\r\nimport SellIcon from '@mui/icons-material/Sell';\r\nimport LocalShippingIcon from '@mui/icons-material/LocalShipping';\r\n// LocalShippingIcon duplicated\r\n// import AccountBalanceIcon from '@mui/icons-material/AccountBalance'; // Removed per request\r\nimport LogoutIcon from '@mui/icons-material/Logout';\r\nimport MenuIcon from '@mui/icons-material/Menu';\r\nimport ChevronLeftIcon from '@mui/icons-material/ChevronLeft';\r\nimport ExpandLess from '@mui/icons-material/ExpandLess';\r\nimport ExpandMore from '@mui/icons-material/ExpandMore';\r\nimport DashboardIcon from '@mui/icons-material/Dashboard';\r\nimport CurrencyPoundIcon from '@mui/icons-material/CurrencyPound';\r\n\r\nconst drawerWidth = 240;\r\nconst collapsedDrawerWidth = 64;\r\n\r\ninterface LayoutProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\ninterface MenuItem {\r\n    text: string;\r\n    icon: React.ReactNode;\r\n    path?: string;\r\n    children?: MenuItem[];\r\n    id: string;\r\n}\r\n\r\nconst Layout: React.FC<LayoutProps> = ({ children }) => {\r\n    const [mobileOpen, setMobileOpen] = useState(false);\r\n    const [desktopOpen, setDesktopOpen] = useState(true);\r\n    // Collapsed by default\r\n    const [openMenus, setOpenMenus] = useState<Record<string, boolean>>({});\r\n\r\n    const navigate = useNavigate();\r\n    const location = useLocation();\r\n    const { logout } = useAuth();\r\n\r\n    const handleDrawerToggle = () => {\r\n        setMobileOpen(!mobileOpen);\r\n    };\r\n\r\n    const handleDesktopDrawerToggle = () => {\r\n        setDesktopOpen(!desktopOpen);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        logout();\r\n        navigate('/login');\r\n    };\r\n\r\n    const handleMenuClick = (id: string, path?: string) => {\r\n        if (path && path !== '#') {\r\n            navigate(path);\r\n            if (mobileOpen) handleDrawerToggle();\r\n        }\r\n\r\n        // Single Expand Logic:\r\n        // If it's a parent item (no path or path='#'), toggle it and CLOSE others.\r\n        // We only want one expanded section at a time.\r\n        if (!path || path === '#') {\r\n            setOpenMenus(prev => {\r\n                const isCurrentlyOpen = prev[id];\r\n                // If opening, close others. If closing, just close.\r\n                return { [id]: !isCurrentlyOpen };\r\n            });\r\n        }\r\n    };\r\n\r\n    const menuItems: MenuItem[] = [\r\n        {\r\n            text: 'Dashboard',\r\n            icon: <DashboardIcon />,\r\n            id: 'Dashboard',\r\n            path: '/',\r\n        },\r\n        {\r\n            text: 'Value',\r\n            icon: <EmojiObjectsIcon />,\r\n            id: 'Value',\r\n            children: [\r\n                { text: 'FindAMasters', icon: null, path: '/fam', id: 'FAM' },\r\n                { text: 'FindAPhD', icon: null, path: '/fap', id: 'FAP' },\r\n                { text: 'Projects', icon: null, path: '/upcoming-projects', id: 'UpcomingProjects' }\r\n            ]\r\n        },\r\n        {\r\n            text: 'Marketing',\r\n            icon: <CampaignIcon />,\r\n            id: 'Marketing',\r\n            children: [\r\n                { text: 'Content', icon: null, path: '/content', id: 'Content' },\r\n                { text: 'Analytics', icon: null, path: '/analytics', id: 'Analytics' },\r\n            ]\r\n        },\r\n        {\r\n            text: 'Sales',\r\n            icon: <SellIcon />,\r\n            id: 'Sales',\r\n            children: [\r\n                { text: 'Predictor', icon: null, path: '/predictor', id: 'Predictor' },\r\n                { text: 'Orders', icon: null, path: '/orders', id: 'Orders' },\r\n                { text: 'Contacts', icon: null, path: '/users', id: 'Contacts' },\r\n            ]\r\n        },\r\n        {\r\n            text: 'Delivery',\r\n            icon: <LocalShippingIcon />,\r\n            id: 'Delivery',\r\n            children: [\r\n                { text: 'Campaign', icon: null, path: '/campaigns', id: 'Campaigns' },\r\n                { text: 'Events', icon: null, path: '/events', id: 'Events' },\r\n                { text: 'Email Service', icon: null, path: '/emailer', id: 'Emailer' },\r\n            ]\r\n        },\r\n        {\r\n            text: 'Finance',\r\n            icon: <CurrencyPoundIcon />,\r\n            id: 'Finance',\r\n            children: [\r\n                { text: 'Overview', icon: null, path: '/finance', id: 'FinanceOverview' },\r\n            ]\r\n        }\r\n    ];\r\n\r\n    const renderMenuItem = (item: MenuItem, depth: number = 0, isCollapsed: boolean) => {\r\n        const isOpen = openMenus[item.id] || false;\r\n        const isSelected = item.path ? location.pathname === item.path : false;\r\n\r\n        // Simplified indentation for text-only menu\r\n        // Base padding 2.5, +1.5 for each depth level\r\n        // const paddingLeft = isCollapsed ? 2.5 : 2.5 + (depth * 2); // Unused\r\n\r\n        return (\r\n            <React.Fragment key={item.id}>\r\n                <ListItem disablePadding sx={{ display: 'block' }}>\r\n                    <ListItemButton\r\n                        onClick={() => {\r\n                            handleMenuClick(item.id, item.path);\r\n                            // If sidebar is collapsed, OPEN it when clicking an icon\r\n                            if (isCollapsed && item.children) {\r\n                                setDesktopOpen(true);\r\n                            }\r\n                            // Navigate to first child if no direct path (and has children)\r\n                            if ((!item.path || item.path === '#') && item.children && item.children.length > 0) {\r\n                                const firstChild = item.children[0];\r\n                                if (firstChild.path) navigate(firstChild.path);\r\n                            }\r\n                        }}\r\n                        sx={{\r\n                            minHeight: 48,\r\n                            justifyContent: isCollapsed ? 'center' : 'initial',\r\n                            px: 2.5,\r\n                            bgcolor: isSelected ? 'rgba(0, 0, 0, 0.04)' : 'transparent',\r\n                            '&:hover': {\r\n                                bgcolor: 'rgba(0, 0, 0, 0.04)',\r\n                            },\r\n                        }}\r\n                    >\r\n                        {/* Icon: Show if item has one AND (menu is collapsed OR it's a child? No, user said headers). \r\n                            User: \"when the menu bar is closed the icons appear, but when the menu is open = no icons gets to the headers?\"\r\n                        */}\r\n                        {item.icon && isCollapsed && (\r\n                            <ListItemIcon sx={{ minWidth: 40, justifyContent: 'center', color: '#3E4DA1' }}>\r\n                                {item.icon}\r\n                            </ListItemIcon>\r\n                        )}\r\n\r\n                        {/* Text Only - Professional Look (Visible when open) */}\r\n                        {!isCollapsed && (\r\n                            <>\r\n                                <Box sx={{ display: 'flex', alignItems: 'center', flexGrow: 1 }}>\r\n                                    <ListItemText\r\n                                        primary={item.text}\r\n                                        primaryTypographyProps={{\r\n                                            fontSize: depth === 0 ? '0.9rem' : '0.85rem',\r\n                                            fontWeight: isSelected ? 600 : (depth === 0 ? 500 : 400),\r\n                                            color: 'inherit',\r\n                                        }}\r\n                                    />\r\n                                    {/* Tooltip added next to Dashboard */}\r\n                                    {item.id === 'Dashboard' && (\r\n                                        <Tooltip\r\n                                            title=\"CRM is split into core business areas: Value, Market, Sell, Delivery, Finance\"\r\n                                            arrow\r\n                                            placement=\"right\"\r\n                                        >\r\n                                            <InfoOutlinedIcon sx={{ fontSize: 16, ml: 1, cursor: 'help', opacity: 0.5, color: 'inherit' }} />\r\n                                        </Tooltip>\r\n                                    )}\r\n                                </Box>\r\n                                {item.children && (isOpen ? <ExpandLess sx={{ fontSize: '1.2rem', color: 'inherit', opacity: 0.7 }} /> : <ExpandMore sx={{ fontSize: '1.2rem', color: 'inherit', opacity: 0.7 }} />)}\r\n                            </>\r\n                        )}\r\n                    </ListItemButton>\r\n                </ListItem>\r\n                {\r\n                    !isCollapsed && item.children && (\r\n                        <Collapse in={isOpen} timeout=\"auto\" unmountOnExit>\r\n                            <List component=\"div\" disablePadding>\r\n                                {item.children.map(child => renderMenuItem(child, depth + 1, false))}\r\n                            </List>\r\n                        </Collapse>\r\n                    )\r\n                }\r\n            </React.Fragment >\r\n        );\r\n    };\r\n\r\n    const drawer = (isCollapsed: boolean) => {\r\n        return (\r\n            <Box sx={{\r\n                height: '100%',\r\n                display: 'flex',\r\n                flexDirection: 'column',\r\n                bgcolor: '#f8f9fa',\r\n                overflow: 'hidden'\r\n            }}>\r\n                <Box\r\n                    sx={{\r\n                        flex: 1,\r\n                        overflowY: 'auto',\r\n                        '&::-webkit-scrollbar': { display: 'none' },\r\n                        scrollbarWidth: 'none',\r\n                        msOverflowStyle: 'none',\r\n                    }}\r\n                >\r\n                    <List sx={{ mt: 2, width: isCollapsed ? collapsedDrawerWidth : '100%' }}>\r\n                        {menuItems.map(item => renderMenuItem(item, 0, isCollapsed))}\r\n                    </List>\r\n                </Box>\r\n\r\n                <List sx={{ px: isCollapsed ? 1 : 2, pb: 2, width: isCollapsed ? collapsedDrawerWidth : '100%' }}>\r\n                    <Divider sx={{ mb: 2 }} />\r\n                    <ListItem disablePadding>\r\n                        <ListItemButton\r\n                            onClick={handleLogout}\r\n                            sx={{\r\n                                borderRadius: 2,\r\n                                justifyContent: isCollapsed ? 'center' : 'flex-start',\r\n                                '&:hover': {\r\n                                    bgcolor: 'error.light',\r\n                                    color: 'error.contrastText',\r\n                                    '& .MuiListItemIcon-root': {\r\n                                        color: 'error.contrastText',\r\n                                    },\r\n                                },\r\n                            }}\r\n                        >\r\n                            <ListItemIcon sx={{ minWidth: isCollapsed ? 0 : 40, justifyContent: 'center' }}>\r\n                                <LogoutIcon />\r\n                            </ListItemIcon>\r\n                            {/* Text removed for icon-only look */}\r\n                        </ListItemButton>\r\n                    </ListItem>\r\n                </List>\r\n            </Box>\r\n        );\r\n    };\r\n\r\n    const currentDrawerWidth = desktopOpen ? drawerWidth : collapsedDrawerWidth;\r\n\r\n    return (\r\n        <Box sx={{ display: 'flex', minHeight: '100vh', bgcolor: '#fafbfc' }}>\r\n            {/* Top Navigation Bar */}\r\n            <AppBar\r\n                position=\"fixed\"\r\n                elevation={0}\r\n                sx={{\r\n                    zIndex: (theme: any) => theme.zIndex.drawer + 1,\r\n                    bgcolor: 'white',\r\n                    borderBottom: '1px solid',\r\n                    borderColor: 'divider',\r\n                }}\r\n            >\r\n                <Toolbar>\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        edge=\"start\"\r\n                        onClick={handleDrawerToggle}\r\n                        sx={{ mr: 2, display: { sm: 'none' }, color: 'text.primary' }}\r\n                    >\r\n                        <MenuIcon />\r\n                    </IconButton>\r\n\r\n                    <IconButton\r\n                        color=\"inherit\"\r\n                        edge=\"start\"\r\n                        onClick={handleDesktopDrawerToggle}\r\n                        sx={{ mr: 2, display: { xs: 'none', sm: 'block' }, color: 'text.primary' }}\r\n                    >\r\n                        {desktopOpen ? <ChevronLeftIcon /> : <MenuIcon />}\r\n                    </IconButton>\r\n\r\n                    <Box\r\n                        component=\"img\"\r\n                        src=\"/keystone-logo.png\"\r\n                        alt=\"Keystone\"\r\n                        sx={{\r\n                            height: 40,\r\n                            objectFit: 'contain',\r\n                            mr: 2,\r\n                        }}\r\n                        onError={(e: React.SyntheticEvent<HTMLImageElement>) => {\r\n                            e.currentTarget.style.display = 'none';\r\n                        }}\r\n                    />\r\n\r\n                    <Box sx={{ flexGrow: 1 }} />\r\n\r\n                    {/* Logout Button in Top Right */}\r\n                    <IconButton\r\n                        onClick={handleLogout}\r\n                        color=\"primary\"\r\n                        sx={{\r\n                            border: '1px solid',\r\n                            borderColor: 'divider',\r\n                            borderRadius: 2,\r\n                            p: 1\r\n                        }}\r\n                    >\r\n                        <LogoutIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                </Toolbar>\r\n            </AppBar>\r\n\r\n            {/* Sidebar */}\r\n            <Box\r\n                component=\"nav\"\r\n                sx={{\r\n                    width: { sm: currentDrawerWidth },\r\n                    flexShrink: { sm: 0 },\r\n                    // ANIMATE THE LAYOUT CONTAINER MATCHING DRAWER\r\n                    transition: 'width 0.8s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                }}\r\n            >\r\n                <Drawer\r\n                    variant=\"temporary\"\r\n                    open={mobileOpen}\r\n                    onClose={handleDrawerToggle}\r\n                    ModalProps={{ keepMounted: true }}\r\n                    sx={{\r\n                        display: { xs: 'block', sm: 'none' },\r\n                        '& .MuiDrawer-paper': {\r\n                            boxSizing: 'border-box',\r\n                            width: drawerWidth,\r\n                            border: 'none',\r\n                            mt: '64px',\r\n                        },\r\n                    }}\r\n                >\r\n                    {drawer(false)}\r\n                </Drawer>\r\n                <Drawer\r\n                    variant=\"permanent\"\r\n                    sx={{\r\n                        display: { xs: 'none', sm: 'block' },\r\n                        '& .MuiDrawer-paper': {\r\n                            boxSizing: 'border-box',\r\n                            width: currentDrawerWidth,\r\n                            border: 'none',\r\n                            borderRight: '1px solid',\r\n                            borderColor: 'divider',\r\n                            mt: '64px',\r\n                            // Slow Open/Close (0.8s)\r\n                            transition: 'width 0.8s cubic-bezier(0.4, 0, 0.2, 1)',\r\n                            overflowX: 'hidden',\r\n                        },\r\n                    }}\r\n                    open\r\n                >\r\n                    {drawer(!desktopOpen)}\r\n                </Drawer>\r\n            </Box>\r\n\r\n            {/* Main Content */}\r\n            <Box\r\n                component=\"main\"\r\n                sx={{\r\n                    flexGrow: 1,\r\n                    width: '100%', // Ensure it takes available space\r\n                    minHeight: '100vh',\r\n                    mt: '64px',\r\n                    // Width is handled by flexGrow + Sidebar transition, ensuring perfect sync\r\n                }}\r\n            >\r\n                <Box sx={{ p: 4 }}>\r\n                    {children}\r\n                </Box>\r\n            </Box>\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default Layout;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\components\\PredictionTool.tsx","messages":[{"ruleId":"react-hooks/exhaustive-deps","severity":1,"message":"React Hook useEffect has a missing dependency: 'handlePredict'. Either include it or remove the dependency array.","line":75,"column":8,"nodeType":"ArrayExpression","endLine":75,"endColumn":43,"suggestions":[{"desc":"Update the dependencies array to be: [type, selectedCountries, duration, handlePredict]","fix":{"range":[2994,3029],"text":"[type, selectedCountries, duration, handlePredict]"}}]}],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState, useEffect } from 'react';\r\nimport {\r\n    Paper, Grid, Typography, Box, ToggleButton, ToggleButtonGroup,\r\n    Autocomplete, TextField, Button, Table, TableBody, TableCell,\r\n    TableContainer, TableHead, TableRow, Card, CardContent, Tooltip\r\n} from '@mui/material';\r\nimport InfoOutlinedIcon from '@mui/icons-material/InfoOutlined';\r\nimport api from '../api';\r\nimport type { PredictionResult } from '../types';\r\n\r\nconst PredictionTool: React.FC = () => {\r\n    const [type, setType] = useState<\"Brand\" | \"LeadGen\">(\"Brand\");\r\n    const [selectedCountries, setSelectedCountries] = useState<string[]>([\"GB\", \"US\"]);\r\n    const [duration, setDuration] = useState<number>(1);\r\n    const [loading, setLoading] = useState(false);\r\n    const [result, setResult] = useState<PredictionResult | null>(null);\r\n\r\n    const countryOptions = [\r\n        { code: \"GB\", label: \"United Kingdom\" },\r\n        { code: \"US\", label: \"United States\" },\r\n        { code: \"AU\", label: \"Australia\" },\r\n        { code: \"CA\", label: \"Canada\" },\r\n        { code: \"IE\", label: \"Ireland\" },\r\n        { code: \"NZ\", label: \"New Zealand\" },\r\n        { code: \"DE\", label: \"Germany\" },\r\n        { code: \"FR\", label: \"France\" },\r\n        { code: \"ES\", label: \"Spain\" },\r\n        { code: \"IT\", label: \"Italy\" },\r\n        { code: \"NL\", label: \"Netherlands\" },\r\n        { code: \"BE\", label: \"Belgium\" },\r\n        { code: \"AT\", label: \"Austria\" },\r\n        { code: \"CH\", label: \"Switzerland\" },\r\n        { code: \"SE\", label: \"Sweden\" },\r\n        { code: \"NO\", label: \"Norway\" },\r\n        { code: \"DK\", label: \"Denmark\" },\r\n        { code: \"FI\", label: \"Finland\" },\r\n        { code: \"PL\", label: \"Poland\" },\r\n        { code: \"CZ\", label: \"Czech Republic\" },\r\n        { code: \"PT\", label: \"Portugal\" },\r\n        { code: \"GR\", label: \"Greece\" },\r\n        { code: \"HU\", label: \"Hungary\" },\r\n        { code: \"RO\", label: \"Romania\" },\r\n        { code: \"SG\", label: \"Singapore\" },\r\n        { code: \"HK\", label: \"Hong Kong\" },\r\n        { code: \"MY\", label: \"Malaysia\" },\r\n        { code: \"IN\", label: \"India\" },\r\n        { code: \"AE\", label: \"United Arab Emirates\" },\r\n        { code: \"ZA\", label: \"South Africa\" },\r\n    ];\r\n\r\n    const handlePredict = async () => {\r\n        if (selectedCountries.length === 0) return;\r\n        setLoading(true);\r\n        try {\r\n            const alloc: Record<string, number> = {};\r\n            const split = 100 / selectedCountries.length;\r\n            selectedCountries.forEach(c => alloc[c] = split);\r\n\r\n            const response = await api.post<PredictionResult>('/predict', {\r\n                campaign_type: type,\r\n                countries: selectedCountries,\r\n                allocations: alloc,\r\n                duration: duration\r\n            });\r\n            setResult(response.data);\r\n        } catch (err) {\r\n            console.error(err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    useEffect(() => {\r\n        handlePredict();\r\n    }, [type, selectedCountries, duration]);\r\n\r\n    return (\r\n        <Box>\r\n            <Paper elevation={0} sx={{ p: 3, mb: 3, border: '1px solid', borderColor: 'divider' }}>\r\n                <Grid container spacing={3} alignItems=\"center\">\r\n                    {/* Row 1: Type, Duration, Spacers */}\r\n                    <Grid size={{ xs: 12, md: 3 }}>\r\n                        <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\r\n                            Campaign Type\r\n                        </Typography>\r\n                        <ToggleButtonGroup\r\n                            value={type}\r\n                            exclusive\r\n                            onChange={(_, v) => v && setType(v)}\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <ToggleButton value=\"Brand\">Brand</ToggleButton>\r\n                            <ToggleButton value=\"LeadGen\">LeadGen</ToggleButton>\r\n                        </ToggleButtonGroup>\r\n                    </Grid>\r\n\r\n                    <Grid size={{ xs: 12, md: 3 }}>\r\n                        <Typography variant=\"subtitle2\" gutterBottom fontWeight={600}>\r\n                            Duration\r\n                        </Typography>\r\n                        <ToggleButtonGroup\r\n                            value={duration}\r\n                            exclusive\r\n                            onChange={(_, v) => v && setDuration(v)}\r\n                            fullWidth\r\n                            size=\"small\"\r\n                        >\r\n                            <ToggleButton value={1}>1M</ToggleButton>\r\n                            <ToggleButton value={2}>2M</ToggleButton>\r\n                        </ToggleButtonGroup>\r\n                    </Grid>\r\n\r\n                    <Grid size={{ xs: 12, md: 6 }}>\r\n                        {/* Spacer or Future Actions */}\r\n                    </Grid>\r\n\r\n\r\n                    {/* Row 2: Target Countries (Full Width) */}\r\n                    <Grid size={{ xs: 12 }}>\r\n                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 0.5, mb: 1 }}>\r\n                            <Typography variant=\"subtitle2\" fontWeight={600}>\r\n                                Target Countries\r\n                            </Typography>\r\n                            <Tooltip title=\"Estimate campaign performance based on historical data\" arrow>\r\n                                <InfoOutlinedIcon sx={{ color: 'text.secondary', fontSize: 18 }} />\r\n                            </Tooltip>\r\n                        </Box>\r\n                        <Autocomplete\r\n                            multiple\r\n                            options={countryOptions}\r\n                            getOptionLabel={(option) => option.label}\r\n                            value={countryOptions.filter(c => selectedCountries.includes(c.code))}\r\n                            onChange={(_, newValue) => {\r\n                                setSelectedCountries(newValue.map(v => v.code));\r\n                            }}\r\n                            renderInput={(params) => (\r\n                                <TextField {...params} variant=\"outlined\" size=\"small\" placeholder=\"Select countries\" />\r\n                            )}\r\n                            isOptionEqualToValue={(option, value) => option.code === value.code}\r\n                        />\r\n                    </Grid>\r\n\r\n                    {/* Hidden Refresh Button kept for logic if needed, but display none */}\r\n                    <Grid size={{ xs: 12 }} sx={{ display: 'none' }}>\r\n                        <Button onClick={handlePredict} disabled={loading}>Refresh</Button>\r\n                    </Grid>\r\n                </Grid>\r\n            </Paper>\r\n\r\n            {result && (\r\n                <Box>\r\n                    <Box sx={{ display: 'flex', gap: 2, mb: 3 }}>\r\n                        <Card sx={{ flex: 1 }}>\r\n                            <CardContent>\r\n                                <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                    Client Spend\r\n                                </Typography>\r\n                                <Typography variant=\"h5\" fontWeight={700} sx={{ color: '#1AC284' }}>\r\n                                    ┬ú{result.summary.client_spend.toLocaleString()}\r\n                                </Typography>\r\n                            </CardContent>\r\n                        </Card>\r\n                        <Card sx={{ flex: 1 }}>\r\n                            <CardContent>\r\n                                <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                    Impressions\r\n                                </Typography>\r\n                                <Typography variant=\"h5\" fontWeight={700}>\r\n                                    {result.totals.impressions.toLocaleString()}\r\n                                </Typography>\r\n                            </CardContent>\r\n                        </Card>\r\n                        <Card sx={{ flex: 1 }}>\r\n                            <CardContent>\r\n                                <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                    Reach\r\n                                </Typography>\r\n                                <Typography variant=\"h5\" fontWeight={700}>\r\n                                    {result.totals.reach.toLocaleString()}\r\n                                </Typography>\r\n                            </CardContent>\r\n                        </Card>\r\n                        <Card sx={{ flex: 1 }}>\r\n                            <CardContent>\r\n                                <Typography variant=\"subtitle2\" color=\"text.secondary\" gutterBottom>\r\n                                    {type === \"Brand\" ? \"Link Clicks\" : \"Leads\"}\r\n                                </Typography>\r\n                                <Typography variant=\"h5\" fontWeight={700} sx={{ color: '#0000FF' }}>\r\n                                    {type === \"Brand\"\r\n                                        ? result.totals.link_clicks.toLocaleString()\r\n                                        : result.totals.leads.toLocaleString()}\r\n                                </Typography>\r\n                            </CardContent>\r\n                        </Card>\r\n                    </Box>\r\n\r\n                    <TableContainer component={Paper} elevation={0} sx={{ border: '1px solid', borderColor: 'divider' }}>\r\n                        <Table>\r\n                            <TableHead>\r\n                                <TableRow>\r\n                                    <TableCell>Country</TableCell>\r\n                                    <TableCell align=\"right\">Budget</TableCell>\r\n                                    <TableCell align=\"right\">Impressions</TableCell>\r\n                                    <TableCell align=\"right\">Reach</TableCell>\r\n                                    <TableCell align=\"right\">CPM</TableCell>\r\n                                    <TableCell align=\"right\">Frequency</TableCell>\r\n                                    <TableCell align=\"right\">{type === \"Brand\" ? \"Link Clicks\" : \"Leads\"}</TableCell>\r\n                                    <TableCell align=\"right\">{type === \"Brand\" ? \"CPC\" : \"CPL\"}</TableCell>\r\n                                </TableRow>\r\n                            </TableHead>\r\n                            <TableBody>\r\n                                {result.breakdown.map((row) => (\r\n                                    <TableRow key={row.country} hover>\r\n                                        <TableCell component=\"th\" scope=\"row\" sx={{ fontWeight: 500 }}>\r\n                                            {row.country}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\" sx={{ fontWeight: 600 }}>\r\n                                            ┬ú{row.budget.toLocaleString(undefined, { minimumFractionDigits: 0 })}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">{row.impressions.toLocaleString()}</TableCell>\r\n                                        <TableCell align=\"right\">{row.reach.toLocaleString()}</TableCell>\r\n                                        <TableCell align=\"right\">┬ú{row.cpm.toFixed(2)}</TableCell>\r\n                                        <TableCell align=\"right\">{row.frequency.toFixed(2)}</TableCell>\r\n                                        <TableCell align=\"right\" sx={{ fontWeight: 600 }}>\r\n                                            {type === \"Brand\" ? row.link_clicks.toLocaleString() : row.leads.toLocaleString()}\r\n                                        </TableCell>\r\n                                        <TableCell align=\"right\">\r\n                                            ┬ú{type === \"Brand\" ? row.cpc.toFixed(2) : row.cpl.toFixed(2)}\r\n                                        </TableCell>\r\n                                    </TableRow>\r\n                                ))}\r\n                            </TableBody>\r\n                        </Table>\r\n                    </TableContainer>\r\n                </Box>\r\n            )}\r\n        </Box>\r\n    );\r\n};\r\n\r\nexport default PredictionTool;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\contexts\\AuthContext.tsx","messages":[{"ruleId":"react-hooks/set-state-in-effect","severity":2,"message":"Error: Calling setState synchronously within an effect can trigger cascading renders\n\nEffects are intended to synchronize state between React and external systems such as manually updating the DOM, state management libraries, or other platform APIs. In general, the body of an effect should do one or both of the following:\n* Update external systems with the latest state from React.\n* Subscribe for updates from some external system, calling setState in a callback function when external state changes.\n\nCalling setState synchronously within an effect body causes cascading renders that can hurt performance, and is not recommended. (https://react.dev/learn/you-might-not-need-an-effect).\n\nC:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\contexts\\AuthContext.tsx:18:13\n  16 |         const auth = localStorage.getItem('keystone_auth');\n  17 |         if (auth === 'true') {\n> 18 |             setIsAuthenticated(true);\n     |             ^^^^^^^^^^^^^^^^^^ Avoid calling setState() directly within an effect\n  19 |         }\n  20 |     }, []);\n  21 |","line":18,"column":13,"nodeType":null,"endLine":18,"endColumn":31},{"ruleId":"react-refresh/only-export-components","severity":2,"message":"Fast refresh only works when a file only exports components. Use a new file to share constants or functions between components.","line":52,"column":14,"nodeType":"Identifier","messageId":"namedExport","endLine":52,"endColumn":21}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { createContext, useContext, useState, useEffect } from 'react';\r\nimport api from '../api';\r\n\r\ninterface AuthContextType {\r\n    isAuthenticated: boolean;\r\n    login: (email: string, password: string) => Promise<boolean>;\r\n    logout: () => void;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const auth = localStorage.getItem('keystone_auth');\r\n        if (auth === 'true') {\r\n            setIsAuthenticated(true);\r\n        }\r\n    }, []);\r\n\r\n    const login = async (email: string, password: string) => {\r\n        try {\r\n            // Using the new Backend API\r\n            const response = await api.post('/auth/login', { email, password });\r\n\r\n            if (response.data && response.data.token) {\r\n                setIsAuthenticated(true);\r\n                localStorage.setItem('keystone_auth', 'true');\r\n                localStorage.setItem('keystone_user', JSON.stringify(response.data));\r\n                return true;\r\n            }\r\n            return false;\r\n        } catch (error) {\r\n            console.error(\"Login failed\", error);\r\n            return false;\r\n        }\r\n    };\r\n\r\n    const logout = () => {\r\n        setIsAuthenticated(false);\r\n        localStorage.removeItem('keystone_auth');\r\n    };\r\n\r\n    return (\r\n        <AuthContext.Provider value={{ isAuthenticated, login, logout }}>\r\n            {children}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport const useAuth = () => {\r\n    const context = useContext(AuthContext);\r\n    if (context === undefined) {\r\n        throw new Error('useAuth must be used within an AuthProvider');\r\n    }\r\n    return context;\r\n};\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\main.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Analytics.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Contacts.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\ContentBuilder.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Dashboard.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":22,"column":62,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":22,"endColumn":65,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[990,993],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[990,993],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":212,"column":82,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":212,"endColumn":85,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[9944,9947],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[9944,9947],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useState } from 'react';\r\nimport { Box, Typography, Container, Card, CardContent, Chip, IconButton } from '@mui/material';\r\nimport SmartToyIcon from '@mui/icons-material/SmartToy';\r\nimport QuestionAnswerIcon from '@mui/icons-material/QuestionAnswer';\r\nimport AssessmentIcon from '@mui/icons-material/Assessment';\r\nimport SupportAgentIcon from '@mui/icons-material/SupportAgent';\r\nimport ReceiptLongIcon from '@mui/icons-material/ReceiptLong';\r\nimport PlayArrowIcon from '@mui/icons-material/PlayArrow';\r\nimport StopIcon from '@mui/icons-material/Stop';\r\nimport AdOpsModal from '../components/AdOpsModal';\r\nimport api from '../api';\r\n\r\nconst Dashboard: React.FC = () => {\r\n    const [agentStatuses, setAgentStatuses] = useState<Record<number, string>>({\r\n        1: 'Offline',\r\n        2: 'Idle',\r\n        3: 'Idle',\r\n        4: 'Idle'\r\n    });\r\n\r\n    const [adOpsModalOpen, setAdOpsModalOpen] = useState(false);\r\n    const [flaggedCampaigns, setFlaggedCampaigns] = useState<any[]>([]);\r\n\r\n    const agents = [\r\n        {\r\n            id: 1,\r\n            name: 'Database Query Agent',\r\n            category: 'Support Agents',\r\n            icon: QuestionAnswerIcon,\r\n            description: 'Natural language database queries for sales and support teams',\r\n            width: '48%',\r\n            color: '#6366f1' // Indigo\r\n        },\r\n        {\r\n            id: 2,\r\n            name: 'Ad Ops Operative',\r\n            category: 'Operations Agents',\r\n            icon: AssessmentIcon,\r\n            description: 'Analyses campaign performance across Meta, YouTube, and TikTok',\r\n            width: '48%',\r\n            color: '#8b5cf6' // Purple\r\n        },\r\n        {\r\n            id: 3,\r\n            name: 'Client Services',\r\n            category: 'Operations',\r\n            icon: SupportAgentIcon,\r\n            description: 'Assists with client delivery workflows',\r\n            width: '31%',\r\n            color: '#ec4899' // Pink\r\n        },\r\n        {\r\n            id: 4,\r\n            name: 'Order Analyser',\r\n            category: 'Operations',\r\n            icon: ReceiptLongIcon,\r\n            description: 'Analyses order patterns and metrics',\r\n            width: '31%',\r\n            color: '#06b6d4' // Cyan\r\n        }\r\n    ];\r\n\r\n    const handleRunAgent = async (agentId: number) => {\r\n        const currentStatus = agentStatuses[agentId];\r\n\r\n        if (currentStatus === 'Active') {\r\n            setAgentStatuses(prev => ({ ...prev, [agentId]: 'Idle' }));\r\n            return;\r\n        }\r\n\r\n        setAgentStatuses(prev => ({ ...prev, [agentId]: 'Active' }));\r\n\r\n        if (agentId === 2) {\r\n            try {\r\n                const response = await api.get('/campaigns');\r\n                const allCampaigns = [...response.data.Brand, ...response.data.LeadGen];\r\n\r\n                const flagged = allCampaigns.filter(campaign => {\r\n                    const cpm = campaign.total_impressions > 0\r\n                        ? (campaign.total_spend / campaign.total_impressions) * 1000\r\n                        : 0;\r\n\r\n                    const issues: string[] = [];\r\n                    if (cpm > 12) issues.push('High CPM');\r\n                    if (campaign.total_impressions < 1000 && campaign.total_spend > 100) issues.push('Low impressions');\r\n                    if (campaign.total_spend > 500 && campaign.total_impressions === 0) issues.push('No impressions');\r\n\r\n                    return issues.length > 0;\r\n                }).map(campaign => {\r\n                    const cpm = campaign.total_impressions > 0\r\n                        ? (campaign.total_spend / campaign.total_impressions) * 1000\r\n                        : 0;\r\n\r\n                    const issues: string[] = [];\r\n                    if (cpm > 12) issues.push('High CPM');\r\n                    if (campaign.total_impressions < 1000 && campaign.total_spend > 100) issues.push('Low impressions');\r\n                    if (campaign.total_spend > 500 && campaign.total_impressions === 0) issues.push('No impressions');\r\n\r\n                    return {\r\n                        id: campaign.id,\r\n                        name: campaign.name,\r\n                        issues,\r\n                        spend: campaign.total_spend,\r\n                        impressions: campaign.total_impressions,\r\n                        cpm\r\n                    };\r\n                });\r\n\r\n                setFlaggedCampaigns(flagged);\r\n                setAdOpsModalOpen(true);\r\n            } catch (error) {\r\n                console.error('Error fetching campaigns:', error);\r\n            }\r\n        }\r\n    };\r\n\r\n    const getStatusColor = (status: string) => {\r\n        switch (status.toLowerCase()) {\r\n            case 'active': return 'success';\r\n            case 'idle': return 'warning';\r\n            case 'offline': return 'error';\r\n            default: return 'default';\r\n        }\r\n    };\r\n\r\n    return (\r\n        <Container maxWidth=\"xl\" sx={{ mt: 0.5, mb: 4 }}>\r\n            <Box sx={{ mb: 3 }}>\r\n                <Typography variant=\"h4\" color=\"text.primary\" gutterBottom sx={{ display: 'flex', alignItems: 'center', gap: 1, fontFamily: '\"Inter\", \"Helvetica\", \"Arial\", sans-serif', fontWeight: 500, letterSpacing: '-0.02em' }}>\r\n                    <SmartToyIcon fontSize=\"large\" color=\"primary\" /> Automated Agents\r\n                </Typography>\r\n                <Typography variant=\"body1\" color=\"text.secondary\">\r\n                    Overview and status of current AI Agents\r\n                </Typography>\r\n            </Box>\r\n\r\n            {/* Redesigned agent cards with accent bars */}\r\n            <Box sx={{ display: 'flex', gap: 2, flexWrap: 'wrap', alignItems: 'stretch' }}>\r\n                {agents.map((agent) => {\r\n                    const status = agentStatuses[agent.id];\r\n\r\n                    return (\r\n                        <Box\r\n                            key={agent.id}\r\n                            sx={{\r\n                                width: { xs: '100%', sm: agent.width },\r\n                                minWidth: { xs: '100%', sm: '300px' }\r\n                            }}\r\n                        >\r\n                            <Card\r\n                                sx={{\r\n                                    height: '100%',\r\n                                    borderRadius: 2,\r\n                                    position: 'relative',\r\n                                    overflow: 'visible',\r\n                                    border: '1px solid',\r\n                                    borderColor: 'grey.200',\r\n                                    boxShadow: 'none',\r\n                                    transition: 'all 0.3s ease',\r\n                                    '&:hover': {\r\n                                        boxShadow: '0 4px 12px rgba(0,0,0,0.08)',\r\n                                        borderColor: agent.color,\r\n                                    },\r\n                                    '&::before': {\r\n                                        content: '\"\"',\r\n                                        position: 'absolute',\r\n                                        left: 0,\r\n                                        top: 0,\r\n                                        bottom: 0,\r\n                                        width: '5px',\r\n                                        bgcolor: agent.color,\r\n                                        borderRadius: '2px 0 0 2px'\r\n                                    }\r\n                                }}\r\n                            >\r\n                                <CardContent sx={{ p: 2.5, pl: 3, display: 'flex', alignItems: 'center', gap: 2 }}>\r\n                                    {/* Icon with colored background */}\r\n                                    <Box\r\n                                        sx={{\r\n                                            background: `linear-gradient(135deg, ${agent.color}15 0%, ${agent.color}05 100%)`,\r\n                                            p: 1.5,\r\n                                            borderRadius: 2,\r\n                                            display: 'flex',\r\n                                            alignItems: 'center',\r\n                                            justifyContent: 'center',\r\n                                            border: '1px solid',\r\n                                            borderColor: `${agent.color}30`\r\n                                        }}\r\n                                    >\r\n                                        <agent.icon sx={{ fontSize: 32, color: agent.color }} />\r\n                                    </Box>\r\n\r\n                                    {/* Content */}\r\n                                    <Box sx={{ flex: 1, minWidth: 0 }}>\r\n                                        <Box sx={{ display: 'flex', alignItems: 'center', gap: 1.5, mb: 0.5 }}>\r\n                                            <Typography\r\n                                                variant=\"h6\"\r\n                                                fontWeight={600}\r\n                                                sx={{\r\n                                                    lineHeight: 1.2,\r\n                                                    fontSize: '1rem',\r\n                                                    color: 'text.primary',\r\n                                                    overflow: 'hidden',\r\n                                                    textOverflow: 'ellipsis',\r\n                                                    whiteSpace: 'nowrap',\r\n                                                }}\r\n                                            >\r\n                                                {agent.name}\r\n                                            </Typography>\r\n                                            <Chip\r\n                                                label={status}\r\n                                                color={getStatusColor(status) as any}\r\n                                                size=\"small\"\r\n                                                sx={{\r\n                                                    height: 20,\r\n                                                    fontSize: '0.7rem',\r\n                                                    fontWeight: 600\r\n                                                }}\r\n                                            />\r\n                                        </Box>\r\n                                        <Typography\r\n                                            variant=\"body2\"\r\n                                            color=\"text.secondary\"\r\n                                            sx={{\r\n                                                fontSize: '0.875rem',\r\n                                                lineHeight: 1.4,\r\n                                                overflow: 'hidden',\r\n                                                textOverflow: 'ellipsis',\r\n                                                whiteSpace: 'nowrap',\r\n                                                mb: 0.25\r\n                                            }}\r\n                                        >\r\n                                            {agent.description}\r\n                                        </Typography>\r\n                                        <Typography\r\n                                            variant=\"caption\"\r\n                                            color=\"text.secondary\"\r\n                                            sx={{\r\n                                                fontSize: '0.7rem',\r\n                                                opacity: 0.7\r\n                                            }}\r\n                                        >\r\n                                            Last run: {status === 'Active' ? 'Just now' : 'Never'}\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    {/* Action button */}\r\n                                    <IconButton\r\n                                        onClick={() => handleRunAgent(agent.id)}\r\n                                        sx={{\r\n                                            bgcolor: status === 'Active' ? '#10b981' : agent.color,\r\n                                            color: 'white',\r\n                                            width: 44,\r\n                                            height: 44,\r\n                                            '&:hover': {\r\n                                                bgcolor: status === 'Active' ? '#059669' : agent.color,\r\n                                                opacity: 0.9\r\n                                            },\r\n                                            '&:active': {\r\n                                                transform: 'scale(0.95)'\r\n                                            },\r\n                                            transition: 'all 0.2s ease'\r\n                                        }}\r\n                                    >\r\n                                        {status === 'Active' ? <StopIcon sx={{ fontSize: 22 }} /> : <PlayArrowIcon sx={{ fontSize: 22 }} />}\r\n                                    </IconButton>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Box>\r\n                    );\r\n                })}\r\n            </Box>\r\n\r\n            <AdOpsModal\r\n                open={adOpsModalOpen}\r\n                onClose={() => setAdOpsModalOpen(false)}\r\n                flaggedCampaigns={flaggedCampaigns}\r\n            />\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Dashboard;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Emailer.tsx","messages":[{"ruleId":"@typescript-eslint/no-unused-vars","severity":2,"message":"'err' is defined but never used.","line":34,"column":18,"nodeType":null,"messageId":"unusedVar","endLine":34,"endColumn":21}],"suppressedMessages":[],"errorCount":1,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Box, Typography, Container, CircularProgress, Paper,\r\n    Table, TableBody, TableCell, TableContainer, TableHead, TableRow,\r\n    Button, Chip\r\n} from '@mui/material';\r\nimport api from '../api';\r\nimport type { Mailshot } from '../types';\r\n\r\nconst Emailer: React.FC = () => {\r\n    const [mailshots, setMailshots] = useState<Mailshot[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetchData();\r\n    }, []);\r\n\r\n    const fetchData = async () => {\r\n        try {\r\n            const res = await api.get<Mailshot[]>('/email/mailshots/');\r\n            setMailshots(res.data);\r\n        } catch (err) {\r\n            console.error(\"Failed to fetch mailshots\", err);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleSend = async (id: number) => {\r\n        try {\r\n            await api.post(`/email/mailshots/${id}/send`);\r\n            alert(\"Sending background task started!\");\r\n            fetchData(); // Refresh to see state change\r\n        } catch (err) {\r\n            alert(\"Failed to trigger send\");\r\n        }\r\n    }\r\n\r\n    if (loading) return <Box sx={{ display: 'flex', justifyContent: 'center', mt: 8 }}><CircularProgress /></Box>;\r\n\r\n    return (\r\n        <Container maxWidth=\"lg\" sx={{ mt: 4, mb: 4 }}>\r\n            <Box sx={{ mb: 4, display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\r\n                <Box>\r\n                    <Typography variant=\"h4\" color=\"primary\" fontWeight={700}>\r\n                        Bulk Emailer\r\n                    </Typography>\r\n                    <Typography variant=\"body1\" color=\"text.secondary\">\r\n                        Manage and send mass emails (Simulated)\r\n                    </Typography>\r\n                </Box>\r\n                <Button variant=\"contained\" color=\"primary\">Create New</Button>\r\n            </Box>\r\n\r\n            <Paper sx={{ width: '100%', mb: 2 }}>\r\n                <TableContainer>\r\n                    <Table>\r\n                        <TableHead>\r\n                            <TableRow>\r\n                                <TableCell>ID</TableCell>\r\n                                <TableCell>Title</TableCell>\r\n                                <TableCell>Subject</TableCell>\r\n                                <TableCell>Status</TableCell>\r\n                                <TableCell align=\"right\">Sent</TableCell>\r\n                                <TableCell align=\"right\">Opened</TableCell>\r\n                                <TableCell align=\"right\">Actions</TableCell>\r\n                            </TableRow>\r\n                        </TableHead>\r\n                        <TableBody>\r\n                            {mailshots.map((row) => (\r\n                                <TableRow key={row.id}>\r\n                                    <TableCell>{row.id}</TableCell>\r\n                                    <TableCell>{row.title}</TableCell>\r\n                                    <TableCell>{row.subject}</TableCell>\r\n                                    <TableCell>\r\n                                        <Chip\r\n                                            label={row.status}\r\n                                            color={row.status === 'Sent' ? 'success' : row.status === 'Sending' ? 'warning' : 'default'}\r\n                                            size=\"small\"\r\n                                        />\r\n                                    </TableCell>\r\n                                    <TableCell align=\"right\">{row.total_sent}</TableCell>\r\n                                    <TableCell align=\"right\">{row.total_opened}</TableCell>\r\n                                    <TableCell align=\"right\">\r\n                                        {row.status === 'Draft' && (\r\n                                            <Button size=\"small\" variant=\"outlined\" onClick={() => handleSend(row.id)}>\r\n                                                Send\r\n                                            </Button>\r\n                                        )}\r\n                                    </TableCell>\r\n                                </TableRow>\r\n                            ))}\r\n                        </TableBody>\r\n                    </Table>\r\n                </TableContainer>\r\n            </Paper>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Emailer;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Events.tsx","messages":[{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":37,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":40,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1054,1057],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1054,1057],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]},{"ruleId":"@typescript-eslint/no-explicit-any","severity":2,"message":"Unexpected any. Specify a different type.","line":32,"column":76,"nodeType":"TSAnyKeyword","messageId":"unexpectedAny","endLine":32,"endColumn":79,"suggestions":[{"messageId":"suggestUnknown","fix":{"range":[1093,1096],"text":"unknown"},"desc":"Use `unknown` instead, this will force you to explicitly, and safely assert the type is correct."},{"messageId":"suggestNever","fix":{"range":[1093,1096],"text":"never"},"desc":"Use `never` instead, this is useful when instantiating generic type parameters that you don't need to know the type of."}]}],"suppressedMessages":[],"errorCount":2,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"source":"import React, { useEffect, useState } from 'react';\r\nimport {\r\n    Container,\r\n    Typography,\r\n    Box,\r\n    Grid,\r\n    Card,\r\n    CardContent,\r\n    Button,\r\n    Chip,\r\n    CircularProgress,\r\n    Alert\r\n} from '@mui/material';\r\nimport PictureAsPdfIcon from '@mui/icons-material/PictureAsPdf';\r\nimport api from '../api';\r\nimport type { LegacyEventStats } from '../types';\r\n\r\nconst Events: React.FC = () => {\r\n    const [events, setEvents] = useState<LegacyEventStats[]>([]);\r\n    const [loading, setLoading] = useState(true);\r\n    const [error, setError] = useState<string | null>(null);\r\n\r\n    useEffect(() => {\r\n        const fetchEvents = async () => {\r\n            try {\r\n                setLoading(true);\r\n                // Fetching from new CMS4 endpoint which proxies legacy stats\r\n                const response = await api.get<LegacyEventStats[]>('/events/stats/legacy');\r\n                setEvents(response.data);\r\n            } catch (err) {\r\n                console.error('Error fetching events:', err);\r\n                const msg = (err as any).response?.data?.detail || (err as any).message || 'Failed to load events';\r\n                setError(msg);\r\n            } finally {\r\n                setLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchEvents();\r\n    }, []);\r\n\r\n    const handleDownloadPdf = (eventName: string) => {\r\n        // Placeholder for PDF download action\r\n        console.log(`Downloading PDF for ${eventName}`);\r\n        alert(`Downloading PDF Breakdown for ${eventName}...`);\r\n    };\r\n\r\n    if (loading) {\r\n        return (\r\n            <Container sx={{ display: 'flex', justifyContent: 'center', mt: 4 }}>\r\n                <CircularProgress />\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    if (error) {\r\n        return (\r\n            <Container sx={{ mt: 4 }}>\r\n                <Alert severity=\"error\">{error}</Alert>\r\n            </Container>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <Container maxWidth=\"xl\">\r\n            <Box sx={{ mt: 2, mb: 4 }}>\r\n                {/* Title removed as requested */}\r\n\r\n                <Grid container spacing={3} alignItems=\"stretch\">\r\n                    {events.map((event) => (\r\n                        <Grid item xs={12} sm={6} md={4} lg={3} key={event.id || Math.random()} sx={{ display: 'flex' }}>\r\n                            <Card sx={{ height: '100%', display: 'flex', flexDirection: 'column' }}>\r\n                                {/* Placeholder Image */}\r\n                                <Box\r\n                                    sx={{\r\n                                        height: 140,\r\n                                        bgcolor: 'grey.300',\r\n                                        display: 'flex',\r\n                                        alignItems: 'center',\r\n                                        justifyContent: 'center',\r\n                                        color: 'text.secondary'\r\n                                    }}\r\n                                >\r\n                                    <Typography variant=\"caption\">Venue Placeholder</Typography>\r\n                                </Box>\r\n\r\n                                <CardContent sx={{ flexGrow: 1 }}>\r\n                                    <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'flex-start', mb: 2 }}>\r\n                                        <Typography variant=\"h6\" fontWeight={600} component=\"div\" sx={{ lineHeight: 1.2 }}>\r\n                                            {event.venue}\r\n                                        </Typography>\r\n                                        <Chip\r\n                                            label={event.brand || 'FAU'}\r\n                                            size=\"small\"\r\n                                            color={event.brand === 'FAM' ? 'primary' : event.brand === 'FAP' ? 'secondary' : 'default'}\r\n                                            variant=\"outlined\"\r\n                                        />\r\n                                    </Box>\r\n\r\n                                    <Box sx={{ mb: 2 }}>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                            <strong>Product:</strong> {event.product}\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                            <strong>Audience:</strong> {event.audience}\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\" gutterBottom>\r\n                                            <strong>Date:</strong> {event.date}\r\n                                        </Typography>\r\n                                        <Typography variant=\"body2\" color=\"text.secondary\">\r\n                                            <strong>Signups:</strong> {event.signups}\r\n                                        </Typography>\r\n                                    </Box>\r\n\r\n                                    <Button\r\n                                        variant=\"outlined\"\r\n                                        size=\"small\"\r\n                                        startIcon={<PictureAsPdfIcon />}\r\n                                        fullWidth\r\n                                        onClick={() => handleDownloadPdf(event.venue)}\r\n                                        sx={{ mt: 'auto' }}\r\n                                    >\r\n                                        PDF Stats\r\n                                    </Button>\r\n                                </CardContent>\r\n                            </Card>\r\n                        </Grid>\r\n                    ))}\r\n                </Grid>\r\n            </Box>\r\n        </Container>\r\n    );\r\n};\r\n\r\nexport default Events;\r\n","usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Locations.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Login.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Marketing.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\Orders.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\pages\\PlaceholderPage.tsx","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\theme.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\src\\types\\index.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]},{"filePath":"C:\\Users\\JamieBooth\\OneDrive - Keystone Academic Solutions\\Skrivebord\\KeystoneTest2\\frontend\\vite.config.ts","messages":[],"suppressedMessages":[],"errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":[]}]
